<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
    <title>Shopping Cart</title>

</head>
<body>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-10 col-11 mx-auto">
            <div class="row mt-5 gx-3" id="productsContainer">
                <!-- Products will be dynamically added here -->
            </div>
        </div>
    </div>
</div>

<div class="cart-overlay" id="cartOverlay">
    <!-- Cart details will be shown here -->
</div>

<script>
    // Products data
    let products = [
        {
            shop_tag: "New",
            shop_title: "TRIPR",
            shop_subtitle: "Accessory",
            shop_price: 14.99,
            shop_discount: 29.99,
            imageUri: "assets/img/1.png",
            id: 1,
            types: "tshirts"
        },
        {
            shop_tag: "Sale",
            shop_title: "Allen Solly",
            shop_subtitle: "Accessory",
            shop_price: 11.99,
            shop_discount: 21.99,
            imageUri: "assets/img/2.png",
            id: 2,
            types: "tshirts"
        }
        // Add more products as needed
    ];

    // Function to render a product card
    function renderProduct(product) {
        // Create product card element
        let productCard = document.createElement('div');
        productCard.classList.add('shop__content');

        // Add product details
        productCard.innerHTML = `
            <div class="shop__tag">${product.shop_tag}</div>
            <img src="${product.imageUri}" alt="" class="shop__img">
            <h3 class="shop__title">${product.shop_title}</h3>
            <span class="shop__subtitle">${product.shop_subtitle}</span>
            <div class="shop__prices">
                <span class="shop__price">$${product.shop_price}</span>
                <span class="shop__discounts">$${product.shop_discount}</span>
            </div>
            <a href="#" class="button shop__button" onclick="addToCart(${product.id})">
                <i class="bx bx-cart-alt shop__icon"></i>
            </a>
        `;

        return productCard;
    }

  // Function to add product to cart
function addToCart(productId) {
    let product = products.find(p => p.id === productId);
    // Add product to cart logic here
    console.log("Product added to cart:", product);

    // Check if the product is already in the cart
    let existingCartItem = document.querySelector(`.cart-item[data-id="${product.id}"]`);
    if (existingCartItem) {
        // If the product already exists, increment its quantity
        let quantityElement = existingCartItem.querySelector('.quantity');
        let currentQuantity = parseInt(quantityElement.innerText);
        quantityElement.innerText = currentQuantity + 1;
    } else {
        // If the product does not exist in the cart, add it as a new item
        let cartOverlay = document.getElementById('cartOverlay');
        let cartItem = document.createElement('div');
        cartItem.classList.add('cart-item');
        cartItem.setAttribute('data-id', product.id);
        cartItem.innerHTML = `
            <div class="item-details">
                <img src="${product.imageUri}" alt="" class="cart-item-img">
                <div class="item-info">
                    <h4>${product.shop_title}</h4>
                    <p>${product.shop_subtitle}</p>
                    <span>$${product.shop_price}</span>
                </div>
            </div>
            <div class="item-actions">
                <button class="quantity-btn decrease">-</button>
                <span class="quantity">1</span>
                <button class="quantity-btn increase">+</button>
                <button class="remove-btn">Remove</button>
            </div>
        `;
        cartOverlay.appendChild(cartItem);
    }

    // Update total cart amount
    updateTotalCartAmount(product.shop_price);
}

// Function to update total cart amount
function updateTotalCartAmount(price) {
    let totalCartAmountElement = document.getElementById('total_cart_amt');
    let currentTotalAmount = parseFloat(totalCartAmountElement.innerText.substring(1));
    let newTotalAmount = currentTotalAmount + price;
    totalCartAmountElement.innerText = '$' + newTotalAmount.toFixed(2);
}

// Event delegation for +/- buttons and remove button
document.getElementById('cartOverlay').addEventListener('click', function (event) {
    let target = event.target;
    if (target.classList.contains('decrease')) {
        decreaseQuantity(target);
    } else if (target.classList.contains('increase')) {
        increaseQuantity(target);
    } else if (target.classList.contains('remove-btn')) {
        removeItem(target);
    }
});

// Function to decrease quantity
function decreaseQuantity(button) {
    let quantityElement = button.nextElementSibling;
    let currentQuantity = parseInt(quantityElement.innerText);
    if (currentQuantity > 1) {
        quantityElement.innerText = currentQuantity - 1;
        updateTotalCartAmount(-parseFloat(button.closest('.cart-item').querySelector('.item-info span').innerText.substring(1)));
    }
}

// Function to increase quantity
function increaseQuantity(button) {
    let quantityElement = button.previousElementSibling;
    let currentQuantity = parseInt(quantityElement.innerText);
    quantityElement.innerText = currentQuantity + 1;
    updateTotalCartAmount(parseFloat(button.closest('.cart-item').querySelector('.item-info span').innerText.substring(1)));
}

// Function to remove item from cart
function removeItem(button) {
    let cartItem = button.closest('.cart-item');
    updateTotalCartAmount(-parseFloat(cartItem.querySelector('.item-info span').innerText.substring(1)));
    cartItem.remove();
}

    // Render products
    let productsContainer = document.getElementById('productsContainer');
    products.forEach(product => {
        productsContainer.appendChild(renderProduct(product));
    });
</script>

</body>
</html>
